<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="com.ptc.rain.notice.mapper.NoticeMapper">

	<!-- 게시물 목록 조회 -->
    <select id="selectNoticeList" parameterType="NoticeDto" resultType="NoticeDto">
        SELECT 
        	NOTI_NO
        	, TITLE
        	, WRITER
        	, CONT
        	, REGR
        	, REG_DTIME
        	, MODR
        	, MOD_DTIME
        	, EXP_YN
        	, NOTI_TYP
        	, CMNT_YN
        	, DEL_YN
       	FROM notice
       	WHERE 1=1
    		AND DEL_YN = "N"
    </select>
    
    <!-- 게시물 1개 조회 -->
    <select id="selectNoticeOne" parameterType="int" resultType="NoticeDto">
        SELECT 
        	NOTI_NO
        	, TITLE
        	, WRITER
        	, CONT
        	, REGR
        	, REG_DTIME
        	, MODR
        	, MOD_DTIME
        	, EXP_YN
        	, NOTI_TYP
        	, CMNT_YN
        	, DEL_YN
       	FROM notice
       	WHERE 1=1 
       		AND NOTI_NO = #{notiNo}
       		AND DEL_YN = "N"
    </select>
    
    <!-- 게시물 등록 -->
    <insert id="insertNotice" parameterType="NoticeDto">
    	INSERT INTO notice(
			TITLE
			,WRITER
			,CONT
			,EXP_YN
			,NOTI_TYP
			,CMNT_YN
			,DEL_YN
		) VALUES(
			#{title},
			#{writer},
			#{cont},
			#{expYn},
			#{notiTyp},
			#{cmntYn},
			"N"
		)
    </insert>
    
    <!-- 게시물 수정 -->
    <update id="updateNotice" parameterType="NoticeDto">
    	UPDATE notice
    	SET
    		TITLE = #{title},
			WRITER = #{writer},
			CONT = #{cont},
			EXP_YN = #{expYn},
			NOTI_TYP = #{notiTyp},
			CMNT_YN = #{cmntYn},
			MOD_DTIME = CURRENT_TIMESTAMP
		WHERE NOTI_NO = #{notiNo}
    </update>
    
    <!-- 게시물 삭제 -->
    <update id="deleteNotice" parameterType="int">
    	UPDATE notice
    	SET
    		DEL_YN = "Y",
    		MOD_DTIME = CURRENT_TIMESTAMP
   		WHERE NOTI_NO = #{notiNo}
    </update>
    
</mapper>